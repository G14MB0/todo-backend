# DOCs

Usually this files serve as documentations but in this case I use them in order to share architectural and functional decision about this application.
I structured the following in a Q&A format to make the things easier to explain

### Why REST and not GraphQL?
In general I'm used to use REST in all the case the a precise and "simple" application functioning schema is present and future developement of the app will have small impact on 
the general behavior.
This means that a single GraphQL endpoint is maybe better in case large and not static types of data need to be available at API level and the evolution of the application is 
strictly related to the data schemas.

In this case a fixed and easy-to-evolve database schema can be identified so RESTful APIs are better. In addition, specific endpoint for specific operation are easy to mantain and documents, data validation can be made per endpoint and docs can be autogenerated by FASTapi

### Why FASTapi and not Flask?
I used to deep learn FASTapi and prefer it in the majority of my developing due to 3 main reasons:
- in-built data validation and easy integration with **Pydantic**
- Asynchronous task support (this is not the case but often use asynchronous tasks in my apps)
- Automatic docs generation (api schema, enpoint and descriptions)

### Is this serving a user-based application?
Yes, this application is fully user-based and all the interaction with it's persistent layer (database) will be allowd only by logged user.

### How authentication is managed?
Sign in and Log in are managed using a simple but secure path:
- a new user is created using createUser endpoint.
- it's sensible data (password only in this case) is hashed and saved into the db (no raw pass is saved)
- the login process will only check for matching hashes and not raw passwords.
- a login success returns a JWT (Bearer) token
- The token need to be passed as Bearer props in all the API usage.
- Token has an expiration in minutes that can be set as an environment variable


### How is data validation handled?
data validation is performed using pydantic schemas. They can be all found at ./app/schemas.py

All the API enpoint validate data and return error 422 if format is not correct

### How is database connection handled?
Database is created and handled by sqlalchemy.
Also database table models are defined by sqlalchemy in ./app/models.py


### How sensible app information are handled?

Sensible application information (like hashing key) are saved in environment variables. 
in this case they are hardcoded in the `./docker-compose.yml` file and `./.env` file.

Both this two file must never be shared but in this case I'll provide them as examples in order to make the app running.


### whats the nginx file?
I also provided a simple (not HTTPS) nginx configuration. Nginx is a reverse proxy that is used for security purposes. 
in this case only allow traffic on a specific port. Is used in a linux server in production.
